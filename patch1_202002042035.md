# patch1_202002042035

修复登录问题



**main.py**

```
setCookiesFile(os.getcwd()+"\\cookies.txt");
initUrllib();
# 删除initUrllibNoCookies();
```



**utils.py**

```
import http.cookiejar

def initUrllib():
    cookies_file = get_value("cookiesFile");
    print( cookies_file );
    cookie = http.cookiejar.LWPCookieJar()
    cookie.load( cookies_file, ignore_discard=True, ignore_expires=True)
    handler = urllib.request.HTTPCookieProcessor(cookie)
    opener = urllib.request.build_opener(handler)
    UA = getUA();
    headers=("User-Agent", UA);
    opener.addheaders=[headers];
    urllib.request.install_opener(opener)
    set_value("urllib",urllib);

def setCookiesFile( cookies_file ):
    set_value( "cookiesFile", cookies_file );
```



增加**cookies.txt**文件
```
#LWP-Cookies-2.0
// Semicolon separated Cookie File
// This file was generated by EditThisCookie
// Details: http://www.cookiecentral.com/faq/#3.5
// Example: http://www.tutorialspoint.com/javascript/javascript_cookies.htm
// URL: https://lib-nuanxin.wqxuetang.com/#/Book/3202765
Set-Cookie3: PHPSESSID={Here Input You Cookies}; path="/"; domain=.wqxuetang.com; path_spec; expires="0"; version=0
```

用[`fcapano/Edit-This-Cookie`](https://github.com/ETCExtensions/Edit-This-Cookie)获取在系统中登录后获得`PHPSESSID`替换到{Here Input You Cookies}，可以通过其他途径查看PHPSESSID



**wqxtDownloader.py**

修改为

```
sleepRange = {
    "start": 20,
    "end": 40,
    "precision": 1
};
```

